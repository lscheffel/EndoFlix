<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EndoFlick - Sobre</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { overflow: auto; }
        .content { max-width: 800px; margin: 0 auto; padding: 20px; }
        .readme-section { margin-bottom: 20px; }
        .readme-section h2 { border-bottom: 2px solid #555; padding-bottom: 5px; }
        pre { background: #2a2a2a; padding: 10px; border-radius: 5px; }
        code { background: #2a2a2a; padding: 2px 5px; border-radius: 3px; }
    </style>
</head>
<body class="bg-dark text-light">
    <header class="p-2 bg-secondary d-flex justify-content-between">
        <h1 class="h5 m-0">EndoFlix - Video Player <span id="stats"></span></h1>
        <div>
<i class="bi bi-lightbulb theme-toggle me-2" id="themeToggle"></i>
            <a href="/keymaps" class="text-light me-2">Keymaps</a>
            <a href="/about" class="text-light me-2">Sobre</a>
            <a href="/ultra" class="text-light me-2">Ultra Mode</a>
            <a href="{{ url_for('auth.logout') }}" class="text-light">
                <i class="bi bi-box-arrow-right"></i> Logout
            </a>
        </div>
    </header>
    <div class="content">
        <div class="readme-section">
            <h1>EndoFlix - Video Player</h1>
            <p>EndoFlix é um player de vídeos web robusto, construído com Flask e Bootstrap, para organizar e reproduzir arquivos de vídeo de forma prática e dinâmica. Escaneie pastas, crie playlists, salve sessões, randomize vídeos com shuffle (individual ou automático) e aproveite um layout com 4 players simultâneos, tudo integrado com PostgreSQL para gerenciamento de dados.</p>
        </div>
        <div class="readme-section">
            <h2>Funcionalidades</h2>
            <ul>
                <li><strong>Escaneamento de Pastas:</strong> Carrega vídeos (.mp4, .mkv, .mov, .divx, .webm, .mpg, .avi) de qualquer diretório (ex.: X:\Tiktok).</li>
                <li><strong>Playlists:</strong> Crie, salve e carregue playlists diretamente no banco PostgreSQL.</li>
                <li><strong>Sessões:</strong> Salve e restaure sessões com os vídeos em reprodução.</li>
                <li><strong>Shuffle Inteligente:</strong>
                    <ul>
                        <li>Shuffle geral (4 vídeos aleatórios).</li>
                        <li>Shuffles individuais por player.</li>
                        <li>Auto Shuffle com intervalo configurável.</li>
                        <li>Prioriza vídeos não reproduzidos.</li>
                    </ul>
                </li>
                <li><strong>Drag-and-Drop:</strong> Arraste vídeos da lista para os players.</li>
                <li><strong>Interface Moderna:</strong>
                    <ul>
                        <li>Layout com 4 players em grade 2x2.</li>
                        <li>Barra lateral ajustável para playlists/sessões.</li>
                        <li>Filtros por nome e ordenação (A-Z, data).</li>
                    </ul>
                </li>
                <li><strong>Botão de Pânico:</strong> Abre um site aleatório (ex.: Google, YouTube) em caso de emergência.</li>
                <li><strong>Logs Detalhados:</strong> Debug facilitado com logs no backend e frontend.</li>
                <li><strong>Busca em Tempo Real:</strong> Permite pesquisa instantânea na lista de vídeos conforme você digita.</li>
                <li><strong>Atalhos de Teclado Expandidos:</strong> Mais atalhos de teclado para navegação e controle eficientes.</li>
                <li><strong>Exportar/Importar Playlists:</strong> Capacidade de exportar playlists para arquivos e importá-las de volta.</li>
                <li><strong>Filtros Melhorados:</strong> Opções de filtragem aprimoradas para melhor organização dos vídeos.</li>
                <li><strong>Alternâncias de Loop:</strong> Opções para repetir vídeos individuais ou playlists.</li>
                <li><strong>Histórico de Playlists Recentes:</strong> Acesso a playlists usadas recentemente.</li>
                <li><strong>Miniaturas:</strong> Exibição de miniaturas de vídeo para identificação rápida.</li>
                <li><strong>Operações em Lote:</strong> Execute ações em vários vídeos de uma vez.</li>
                <li><strong>Cabeçalhos Unificados:</strong> Design consistente de cabeçalho em toda a aplicação.</li>
            </ul>
        </div>
        <div class="readme-section">
            <h2>Tecnologias</h2>
            <ul>
                <li><strong>Backend:</strong> Flask, Python, psycopg2 (PostgreSQL)</li>
                <li><strong>Frontend:</strong> Bootstrap 5, JavaScript, HTML/CSS</li>
                <li><strong>Banco de Dados:</strong> PostgreSQL</li>
                <li><strong>Outros:</strong> Git para versionamento</li>
            </ul>
        </div>
        <div class="readme-section">
            <h2>Requisitos</h2>
            <ul>
                <li>Python 3.8+</li>
                <li>PostgreSQL (com usuário postgres, senha admin)</li>
                <li>Git</li>
                <li>Navegador moderno (Chrome, Firefox, Edge)</li>
            </ul>
        </div>
        <div class="readme-section">
            <h2>Instalação</h2>
            <ol>
                <li>Clone o repositório:
                    <pre>git clone https://github.com/lscheffel/EndoFlix.git
cd EndoFlix</pre>
                </li>
                <li>Configure o ambiente virtual (opcional, mas recomendado):
                    <pre>python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows</pre>
                </li>
                <li>Instale as dependências:
                    <pre>pip install flask psycopg2-binary</pre>
                </li>
                <li>Configure o PostgreSQL:
                    <ul>
                        <li>Crie o banco videos:
                            <pre>CREATE DATABASE videos;</pre>
                        </li>
                        <li>Conecte-se ao banco:
                            <pre>psql -U postgres -d videos</pre>
                        </li>
                        <li>Crie as tabelas:
                            <pre>CREATE TABLE endoflix_playlist (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    files TEXT[] NOT NULL
);

CREATE TABLE endoflix_session (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    videos TEXT[] NOT NULL
);</pre>
                        </li>
                        <li>Verifique as credenciais: usuário postgres, senha admin, host localhost, porta 5432. Ajuste em main.py se necessário.</li>
                    </ul>
                </li>
                <li>Estrutura do projeto:
                    <ul>
                        <li>Coloque main.py na raiz.</li>
                        <li>Coloque base.html na pasta templates/ (crie a pasta se não existir).</li>
                    </ul>
                </li>
                <li>Rode o servidor:
                    <pre>python main.py</pre>
                </li>
                <li>Acesse <a href="http://localhost:5000">http://localhost:5000</a> no navegador.</li>
            </ol>
        </div>
        <div class="readme-section">
            <h2>Uso</h2>
            <h3>Carregar vídeos:</h3>
            <ul>
                <li>Insira o caminho da pasta (ex.: X:\Tiktok) no campo "Caminho da pasta".</li>
                <li>Clique em "Carregar Pasta" para listar os vídeos.</li>
            </ul>
            <h3>Gerenciar playlists:</h3>
            <ul>
                <li>Após carregar vídeos, clique em "Save" para criar uma playlist.</li>
                <li>Insira um nome e salve. A playlist aparece no dropdown "Selecionar Playlist".</li>
            </ul>
            <h3>Gerenciar sessões:</h3>
            <ul>
                <li>Arraste vídeos para os players ou use "Shuffle".</li>
                <li>Clique em "Save Session" para salvar a sessão atual.</li>
                <li>Use "Remove Session" para deletar uma sessão do dropdown "Selecionar Sessão".</li>
            </ul>
            <h3>Shuffle:</h3>
            <ul>
                <li>Clique em "Shuffle" para 4 vídeos aleatórios.</li>
                <li>Use "Shuffle 1", "Shuffle 2", etc., para shuffles individuais.</li>
                <li>Ative "Auto Shuffle" e ajuste o intervalo (em segundos).</li>
            </ul>
            <h3>Debug:</h3>
            <ul>
                <li>Verifique logs no terminal (backend) e no console do navegador (F12 > Console).</li>
                <li>Exemplo de logs:
                    <ul>
                        <li>Backend: Playlist 'MinhaPlaylist' salva com 59 arquivos.</li>
                        <li>Frontend: Salvando sessão: 2025-05-11T04-37-34_Sem Playlist com 4 vídeos.</li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="readme-section">
            <h2>Estrutura do Projeto</h2>
            <pre>EndoFlix/
├── main.py               # Backend Flask
├── templates/
│   └── base.html         # Frontend HTML/JS/CSS
├── venv/                 # Ambiente virtual (opcional)
└── README.md             # Este arquivo</pre>
        </div>
        <div class="readme-section">
            <h2>Versões</h2>
            <ul>
                <li><strong>v3.0.0 (2025-05-11):</strong>
                    <ul>
                        <li>Refatoração completa: removeu JSON, implementou PostgreSQL.</li>
                        <li>Corrigido gerenciamento de playlists e sessões.</li>
                        <li>Shuffles individuais e auto shuffle.</li>
                        <li>Logs detalhados.</li>
                    </ul>
                </li>
                <li><strong>v2.0.0:</strong>
                    <ul>
                        <li>Correções de layout e suporte a codecs (H.264).</li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="readme-section">
            <h2>Contribuição</h2>
            <ol>
                <li>Fork o repositório.</li>
                <li>Crie uma branch (<code>git checkout -b feature/nova-funcionalidade</code>).</li>
                <li>Commit suas mudanças (<code>git commit -m "Adiciona nova funcionalidade"</code>).</li>
                <li>Push para a branch (<code>git push origin feature/nova-funcionalidade</code>).</li>
                <li>Abra um Pull Request.</li>
            </ol>
        </div>
        <div class="readme-section">
            <h2>Licença</h2>
            <p>MIT License. Veja <a href="#">LICENSE</a> para detalhes.</p>
        </div>
        <div class="readme-section">
            <h2>Contato</h2>
            <ul>
                <li>GitHub: <a href="https://github.com/lscheffel">lscheffel</a></li>
                <li>Issues: Crie uma issue para bugs ou sugestões.</li>
            </ul>
            <p>Feito com 💪 por lscheffel. Bora rodar uns vídeos!</p>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById('themeToggle').addEventListener('change', (e) => {
            document.body.classList.toggle('bg-light', e.target.checked);
            document.body.classList.toggle('bg-dark', !e.target.checked);
            document.body.classList.toggle('text-dark', e.target.checked);
            document.body.classList.toggle('text-light', !e.target.checked);
            document.querySelectorAll('pre, code').forEach(el => {
                el.classList.toggle('bg-light', e.target.checked);
                el.classList.toggle('bg-dark', !e.target.checked);
            });
        });
    </script>
</body>
</html>